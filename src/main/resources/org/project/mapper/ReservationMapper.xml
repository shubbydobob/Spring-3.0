<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="org.project.mapper.ReservationMapper">

 <select id="findReservationByCustomerInfo" resultType="org.project.dto.ReservationDTO">
    SELECT * FROM reservation
    WHERE customer_name = #{customer_name} 
    AND customer_phone = #{customer_phone} 
    AND address_postcode = #{address_postcode} 
    AND address_road = #{address_road} 
    AND address_bname = #{address_bname} 
    AND address_detail = #{address_detail}
  
</select>

 <insert id="insertReservation" parameterType="org.project.dto.ReservationDTO">
       
        
        INSERT INTO reservation 
        (customer_name, customer_phone, address_postcode, address_road, 
        address_bname, address_detail, problem, mechanic, reservation_date, reservation_time)
        VALUES 
        (#{customer_name}, #{customer_phone}, #{address_postcode}, #{address_road}, 
        #{address_bname}, #{address_detail}, #{problem}, #{mechanic}, #{reservation_date}, #{reservation_time})
        
    </insert>
     <select id="getAvailableTimesForMechanic" resultType="String">
        SELECT available_time 
        FROM mechanic_schedule
        WHERE mechanic = #{mechanic} 
          AND available_date = #{date} 
          AND is_reserved = FALSE
    </select>
    
    
     <select id="findByReservationDateAndReservationTime" resultType="org.project.dto.ReservationDTO">
        SELECT * FROM reservation
        WHERE customer_name = #{reservation_date}
        AND reservation_time = #{reservation_time}
    </select>
    
    
 <select id="selectReservation" resultType="org.project.dto.ReservationDTO">
   select * from reservation;
    </select>
    
   
   

    
</mapper>